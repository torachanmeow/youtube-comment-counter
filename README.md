# YouTube Live Chat 自動集計システム

YouTubeのライブチャットをリアルタイムで取得し、スーパーチャット、スーパーステッカー、新規メンバーシップ加入、メンバーシップアップグレード、メンバーシップギフト数、高評価、設定したキーワードの出現回数を集計し、ポイント化するツールです。

配信者向けのツールとして設計されており、視聴者の応援を可視化することで、リスナーとの一体感を高め、より盛り上がる配信を実現できます。

## 主要機能

### リアルタイム集計
- YouTube Data API v3による高精度なライブチャット取得
- スーパーチャット・スーパーステッカー金額の自動集計
- 新規メンバーシップ加入・アップグレード・ギフト数の追跡
- 高評価数のリアルタイム監視
- カスタムキーワード出現回数カウント（最大10個）

### ポイント計算
- 各集計項目への重み付け係数設定
- 為替レート対応による多通貨スーパーチャット換算
- 合計ポイントのリアルタイム表示
- 柔軟なカウントルール設定

### UI機能
- ライブチャット表示とハイライト機能
  - スーパーチャット → **赤色**
  - メンバー関連 → **緑色**
  - スーパーステッカー → **オレンジ色**
  - カスタムキーワード → **青色**
- 動画情報の表示

## 必要な環境

- **ブラウザ**: Chrome、Firefox、Edge（モダンブラウザ）
- **APIキー**: YouTube Data API v3 キー
- **配信**: 公開YouTubeライブ配信（メンバー限定配信は非対応）

## セットアップ

### 1. YouTube API キーの取得

1. [Google Cloud Console](https://console.cloud.google.com/) にアクセス
2. 新しいプロジェクトを作成、または既存プロジェクトを選択
3. YouTube Data API v3 を有効化
4. 認証情報からAPIキーを作成
5. APIキーをコピーして保存

### 2. アプリケーションの起動

**方法1: GitHub Pages**
1. https://torachanmeow.github.io/youtube-comment-counter/ にアクセス

**方法2: ローカル実行**
1. プロジェクトをダウンロード
2. Webサーバーで配信

**注意：** APIキーはブラウザのローカルストレージに保存されます。セキュリティを重視する場合はローカル実行を推奨します。

## 使い方

### 基本操作

| 操作 | 説明 |
|------|------|
| **APIキー設定** | YouTube APIキーを入力 |
| **動画ID入力** | YouTubeライブ配信の動画ID |
| **⏵ 開始** | 集計を開始 |
| **⏸ 一時停止** | 集計を一時停止 |
| **⏹ 停止** | 集計を終了 |

### 重み付け設定

| 項目 | 説明 |
|------|------|
| **高評価** | 高評価数のポイント係数 |
| **スーパーチャット** | スーパーチャット金額のポイント係数 |
| **スーパーステッカー** | スーパーステッカー金額のポイント係数 |
| **メンバーシップ** | 新規加入・アップグレード・ギフト数の係数 |
| **カスタムキーワード** | 指定ワード出現回数の係数（10個まで） |

### カスタマイズ機能

| 設定項目 | 説明 |
|----------|------|
| **為替レート** | 外貨スーパーチャットの円換算レート |
| **ポーリング間隔** | データ取得間隔（秒単位、推奨：30秒） |
| **キーワード重複** | 同一コメント・ユーザーでの重複カウント制御 |
| **表示デザイン** | ポイント表示のフォント・色・透過設定 |

## トラブルシューティング

### APIエラー

| エラー | 原因 | 対処法 |
|--------|------|--------|
| **無効なAPIキー** | キー設定ミス | APIキーを再確認・再入力 |
| **クォーター超過** | API使用制限 | 時間を置いて再実行、ポーリング間隔調整 |
| **アクセス拒否** | 権限不足 | YouTube Data API v3の有効化確認 |

### 配信認識エラー

| エラー | 原因 | 対処法 |
|--------|------|--------|
| **ライブ配信が存在しない** | 動画ID間違い | 動画IDを再確認 |
| **メンバー限定配信** | 非公開配信 | 本ツールでは対応不可、公開配信を使用 |
| **配信終了** | ライブ終了 | 現在配信中のライブ配信を使用 |

## 設定ファイル

### `exchangeRates.json`

為替レートのフォールバック設定ファイル。APIが利用できない場合の代替値を定義。

```json
{
    "USD": 0.0067,
    "EUR": 0.0058,
    "GBP": 0.005,
    "KRW": 9.4,
    "CNY": 0.048
}
```

### `currencyInfo.json`

通貨情報（記号・国名等）の定義ファイル。

```json
{
    "USD": { "symbol": "$", "country": "アメリカ" },
    "EUR": { "symbol": "€", "country": "ユーロ圏" },
    "GBP": { "symbol": "£", "country": "イギリス" },
    "KRW": { "symbol": "₩", "country": "韓国" },
    "CNY": { "symbol": "¥", "country": "中国" }
}
```

## 使用API・ライブラリ

- [YouTube Data API v3](https://developers.google.com/youtube/v3) - ライブチャット・動画情報取得
- [ExchangeRate-API](https://www.exchangerate-api.com/) - 為替レート取得

## ライセンス

このプロジェクトはMITライセンスのもとで提供されます。