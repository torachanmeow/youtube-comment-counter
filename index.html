<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Live Chat 集計システム</title>
    <link rel="stylesheet" href="styles.css">
    <script src="script.js" defer></script>
</head>
<body>
    <div class="container">
        <h1>YouTube Live Chat 集計システム</h1>

        <!-- API設定 -->
        <div class="settings-container">
            <div class="settings-item">
                <label class="settings-label" for="apiKey">APIキー</label>
                <input class="settings-word" type="password" id="apiKey" placeholder="APIキーを入力してください" value="">
                <span class="settings-symbol"></span>
                <button class="settings-btn" id="toggleApiKeyBtn">表示</button>
            </div>
            <div class="settings-item">
                <label class="settings-label" for="exchangeRate">為替レート</label>
                <input class="settings-word" type="text" id="exchangeRateInput" value= "" disabled> <!-- disabled 属性で無効化 -->
                <span class="settings-symbol"></span>
                <button class="settings-btn" id="openExchangeRateModal" >設定</button>
            </div>
        </div>

        <!-- 集計項目設定 -->
        <div class="settings-container">
            <div class="settings-item">
                <label class="settings-label" for="likeWeight">高評価</label>
                <input class="settings-word" type="text" value="-" disabled> <!-- disabled 属性で無効化 -->
                <span class="settings-symbol">✖️</span>
                <input class="settings-weight" type="number" id="likeWeight" value="0" min="-100.0" max="100.0" step="0.1">
            </div>   
            <div class="settings-item">
                <label class="settings-label" for="superChatWeight">スーパーチャット</label>
                <input class="settings-word" type="text" value="-" disabled> <!-- disabled 属性で無効化 -->
                <span class="settings-symbol">✖️</span>
                <input class="settings-weight" type="number" id="superChatWeight" value="0" min="-100.0" max="100.0" step="0.1">
            </div>   
            <div class="settings-item">
                <label class="settings-label" for="superStickerWeight">スーパーステッカー</label>
                <input class="settings-word" type="text" value="-" disabled> <!-- disabled 属性で無効化 -->
                <span class="settings-symbol">✖️</span>
                <input class="settings-weight" type="number" id="superStickerWeight" value="0" min="-100.0" max="100.0" step="0.1">
            </div>   
            <div class="settings-item">
                <label class="settings-label" for="word1">メンバーシップ</label>
                <input class="settings-word" type="text" value="-" disabled> <!-- disabled 属性で無効化 -->
                <span class="settings-symbol">✖️</span>
                <input class="settings-weight" type="number" id="memberWeight" value="0" min="-999" max="999" step="1">
            </div>    
            <div class="settings-item">
                <label class="settings-label" for="word2">キーワード1</label>
                <input class="settings-word" type="text" id="word1" value="" placeholder="特定ワード1">
                <span class="settings-symbol">✖️</span>
                <input class="settings-weight" type="number" id="weight1" value="0" min="-100" max="100" step="1">
            </div>
            <div class="settings-item">
                <label class="settings-label" for="word2">キーワード2</label>
                <input class="settings-word" type="text" id="word2" value="" placeholder="特定ワード2">
                <span class="settings-symbol">✖️</span>
                <input class="settings-weight" type="number" id="weight2" value="0" min="-100" max="100" step="1">
            </div>
            <div class="settings-item">
                <label class="settings-label" for="word3">キーワード3</label>
                <input class="settings-word" type="text" id="word3" value="" placeholder="特定ワード3">
                <span class="settings-symbol">✖️</span>
                <input class="settings-weight" type="number" id="weight3" value="0" min="-100" max="100" step="1">
            </div>
        </div>

        <!-- リクエスト処理 -->
        <div class="settings-half-container">          
            <div class="settings-item">
                <label class="settings-label" for="videoId">動画ID</label>
                <input class="settings-word" type="text" id="videoId" placeholder="動画IDを入力してください" value="">
            </div>
            <div class="settings-item">
                <label class="settings-label" for="pollingInterval">リトライ(秒)</label>
                <span class="settings-symbol"></span>
                <input class="settings-value" type="number" id="pollingInterval" value="30" min="1" max="999" step="1">
            </div>
        </div>

        <!-- ボタン -->
        <div class="button-group">
            <button id="startBtn" class="btn">開始</button>
            <button id="stopBtn" class="btn" disabled>停止</button>
        </div>

        <hr />

        <!-- ステータス表示 -->
        <div id="status" class="status"></div>

        <!-- 最新取得 -->
        <div class="latest-info">
            最新取得：<span id="lastFetchTime">00:00:00</span>
        </div>

        <!-- 合計ポイント -->
        <div class="totalPoints-container">
            <div class="totalPoints-item">
                <span class="totalPoints-label">合計</span>
                <span id="totalPointsDisplay" class="fetch-time">0</span>
            </div>
        </div>

        <hr />

        <!-- 集計結果 -->
        <div id="statsDisplay" class="stats-container">
            <h2>取得結果</h2>
            <div class="stat-item">
                <span class="stat-label">高評価</span>
                <span class="stat-value" id="likeCount">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">スーパーチャット</span>
                <span class="stat-value" id="superChatAmount">¥0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">スーパーステッカー</span>
                <span class="stat-value" id="superStickerAmount">¥0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">メンバーシップ</span>
                <span class="stat-value" id="newMembers">0</span>
            </div>
            <!-- 特定ワードの出現回数 -->
            <div id="wordCountsContainer">
                <!-- 特定ワードが動的に追加されます -->
            </div>
        </div>

        <!-- ポイント換算 -->
        <div class="points-container">
            <h2>ポイント換算</h2>
            <div class="points-item">
                <span class="points-label">高評価</span>
                <span class="points-value" id="likePoints">0</span>
            </div>
            <div class="points-item">
                <span class="points-label">スーパーチャット</span>
                <span class="points-value" id="superChatPoints">0</span>
            </div>
            <div class="points-item">
                <span class="points-label">スーパーステッカー</span>
                <span class="points-value" id="superStickerPoints">0</span>
            </div>
            <div class="points-item">
                <span class="points-label">メンバーシップ</span>
                <span class="points-value" id="memberPoints">0</span>
            </div>
            <!-- 特定ワードポイント -->
            <div id="wordPointsContainer">
                <!-- 特定ワードが動的に追加されます -->
            </div>
        </div>

        <hr />

        <!-- ライブチャット表示 -->
        <div class="line-control">
            <h2>ライブチャット</h2>
            <button id="copyChatBtn" class="copy-btn" onclick="copyToClipboard('liveChat')">Copy</button>
        </div>
        <div class="chat-container">
            <pre id="liveChat" class="chat"></pre>
        </div>

        <!-- 動画情報表示 -->
        <div class="line-control">
            <h2>動画情報</h2>
            <button id="copyDetailsBtn" class="copy-btn" onclick="copyToClipboard('videoDetails')">Copy</button>
        </div>
        <div class="details-container">
            <pre id="videoDetails" class="details"></pre>
        </div>

    </div>

    <!-- モーダルウィンドウ -->
    <div id="exchangeRateModal" class="exchangeRates-modal">
        <div class="exchangeRates-modal-content">
            <span class="exchangeRates-close" id="closeModal">&times;</span>
            <h2>為替レート設定</h2>
            <div class="exchangeRates-scrollable">
                <table id="exchangeRateTable">
                    <thead>
                        <tr>
                            <th id="sortableCurrencyHeader" class="sortable">コード <span id="currencySortArrow">▲</span></th>
                            <th>国</th>
                            <th>レート</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- 動的にリストを生成 -->
                    </tbody>
                </table>
            </div>
            <div class="exchangeRates-buttons">
                <button id="saveExchangeRates" class="exchangeRates-btn">保存</button>
            </div>
        </div>
    </div>

</body>
</html>